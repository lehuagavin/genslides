# è®¾è®¡æ–‡æ¡£ï¼šé¢„è®¾é£æ ¼æ¨¡æ¿ç³»ç»Ÿ

**æ–‡æ¡£ç¼–å·**: 0004
**åˆ›å»ºæ—¥æœŸ**: 2026-02-03
**çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

## 1. æ¦‚è¿°

### 1.1 èƒŒæ™¯

å½“å‰ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åœ¨åˆ›å»ºé¡¹ç›®æ—¶éœ€è¦æ‰‹åŠ¨è¾“å…¥é£æ ¼æè¿°ï¼ˆStyle Promptï¼‰ï¼Œè¿™å¯¹æ–°ç”¨æˆ·ä¸å¤Ÿå‹å¥½ã€‚ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬éœ€è¦æä¾›é¢„è®¾çš„é£æ ¼æ¨¡æ¿ï¼Œè®©ç”¨æˆ·å¯ä»¥å¿«é€Ÿé€‰æ‹©å¹¶ç”Ÿæˆç¬¦åˆç‰¹å®šç¾å­¦é£æ ¼çš„å¹»ç¯ç‰‡ã€‚

### 1.2 ç›®æ ‡

1. **æä¾›4ç§é¢„è®¾é£æ ¼æ¨¡æ¿**ï¼šå‰åœåŠ›é£æ ¼ã€è¿ªå£«å°¼é£æ ¼ã€å­Ÿè²æ–¯é£æ ¼ã€æ¶‚é¸¦è‰ºæœ¯é£æ ¼
2. **æ”¯æŒä¸‹æ‹‰é€‰æ‹©**ï¼šç”¨æˆ·å¯ä»¥ä»é¢„è®¾æ¨¡æ¿ä¸­å¿«é€Ÿé€‰æ‹©
3. **æ”¯æŒè‡ªå®šä¹‰ç¼–è¾‘**ï¼šç”¨æˆ·å¯ä»¥åœ¨é€‰æ‹©é¢„è®¾åç»§ç»­ç¼–è¾‘é£æ ¼æè¿°
4. **ç¡®ä¿é£æ ¼ä¸€è‡´æ€§**ï¼šæ¯æ¬¡ç”Ÿæˆ Slide å›¾åƒæ—¶è‡ªåŠ¨æºå¸¦é¡¹ç›®çš„é£æ ¼æè¿°å’Œå‚è€ƒå›¾ç‰‡

### 1.3 é€‚ç”¨èŒƒå›´

- æ–°å»ºé¡¹ç›®æ—¶çš„é£æ ¼é€‰æ‹©æµç¨‹
- é£æ ¼è®¾ç½®å’Œç¼–è¾‘åŠŸèƒ½
- Slide å›¾åƒç”Ÿæˆæµç¨‹

---

## 2. éœ€æ±‚åˆ†æ

### 2.1 åŠŸèƒ½éœ€æ±‚

| éœ€æ±‚ID | éœ€æ±‚æè¿° | ä¼˜å…ˆçº§ |
|--------|---------|--------|
| FR-001 | ç³»ç»Ÿæä¾›4ç§é¢„è®¾é£æ ¼æ¨¡æ¿ï¼ˆå‰åœåŠ›ã€è¿ªå£«å°¼ã€å­Ÿè²æ–¯ã€æ¶‚é¸¦ï¼‰ | P0 |
| FR-002 | ç”¨æˆ·åœ¨æ–°å»ºé¡¹ç›®æ—¶å¯ä»¥é€‰æ‹©é¢„è®¾é£æ ¼æ¨¡æ¿ | P0 |
| FR-003 | ç”¨æˆ·å¯ä»¥ç¼–è¾‘é€‰ä¸­çš„é£æ ¼æè¿°æ–‡æœ¬ | P0 |
| FR-004 | ç”¨æˆ·å¯ä»¥ä¸ºé€‰ä¸­çš„é£æ ¼ç”Ÿæˆå‚è€ƒå›¾ç‰‡ | P0 |
| FR-005 | æ¯æ¬¡ç”Ÿæˆ Slide å›¾åƒæ—¶è‡ªåŠ¨æºå¸¦é¡¹ç›®é£æ ¼æè¿° | P0 |
| FR-006 | ç”¨æˆ·å¯ä»¥åœ¨é¡¹ç›®åˆ›å»ºåä¿®æ”¹é£æ ¼æ¨¡æ¿ | P1 |
| FR-007 | æ”¯æŒè‡ªå®šä¹‰é£æ ¼ï¼ˆä¸ä½¿ç”¨é¢„è®¾æ¨¡æ¿ï¼‰ | P1 |

### 2.2 éåŠŸèƒ½éœ€æ±‚

| éœ€æ±‚ID | éœ€æ±‚æè¿° | ä¼˜å…ˆçº§ |
|--------|---------|--------|
| NFR-001 | é£æ ¼æ¨¡æ¿æ•°æ®åº”å¯é…ç½®ï¼Œä¾¿äºåç»­æ‰©å±• | P0 |
| NFR-002 | é£æ ¼æè¿°åº”å­˜å‚¨åœ¨é¡¹ç›®å…ƒæ•°æ®ä¸­ | P0 |
| NFR-003 | UI å“åº”æ—¶é—´ < 200msï¼ˆé£æ ¼åˆ‡æ¢ï¼‰ | P1 |
| NFR-004 | å‘åå…¼å®¹ç°æœ‰é¡¹ç›®ï¼ˆæ— é£æ ¼ç±»å‹å­—æ®µï¼‰ | P0 |

---

## 3. æŠ€æœ¯è®¾è®¡

### 3.1 æ•°æ®æ¨¡å‹è®¾è®¡

#### 3.1.1 é¢„è®¾é£æ ¼æ¨¡æ¿æ•°æ®ç»“æ„

**ä½ç½®**: `backend/app/models/style.py`

```python
from dataclasses import dataclass
from enum import Enum

class StyleType(str, Enum):
    """é¢„è®¾é£æ ¼ç±»å‹æšä¸¾"""
    GHIBLI = "ghibli"           # å‰åœåŠ›é£æ ¼
    DISNEY = "disney"           # è¿ªå£«å°¼é£æ ¼
    MEMPHIS = "memphis"         # å­Ÿè²æ–¯é£æ ¼
    GRAFFITI = "graffiti"       # æ¶‚é¸¦è‰ºæœ¯é£æ ¼
    CUSTOM = "custom"           # è‡ªå®šä¹‰é£æ ¼

@dataclass
class StyleTemplate:
    """é£æ ¼æ¨¡æ¿å®šä¹‰"""
    type: StyleType
    name: str                   # ä¸­æ–‡åç§°
    name_en: str                # è‹±æ–‡åç§°
    description: str            # è¯¦ç»†é£æ ¼æè¿°ï¼ˆç”¨äºå›¾åƒç”Ÿæˆï¼‰
    preview_prompt: str         # é¢„è§ˆå›¾ç”Ÿæˆæç¤ºè¯ï¼ˆç®€åŒ–ç‰ˆï¼‰

# é¢„è®¾é£æ ¼æ¨¡æ¿é…ç½®
STYLE_TEMPLATES: dict[StyleType, StyleTemplate] = {
    StyleType.GHIBLI: StyleTemplate(
        type=StyleType.GHIBLI,
        name="å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£",
        name_en="Studio Ghibli Style",
        description="""æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜ä¸ç»†è…»ç¬”è§¦è¥é€ æ¸©æš–æ°›å›´ã€‚
å¤©ç©ºäº‘æœµé‡‡ç”¨å±‚å æ™•æŸ“ï¼Œè‡ªç„¶æ™¯ç‰©ï¼ˆè‰åœ°/æ ‘æœ¨/æ°´é¢ï¼‰ç²¾ç»†æç»˜ã€‚è‰²å½©æ¸©æ¶¦æ²»æ„ˆï¼š
å¥¶æ²¹ç™½åº•ï¼ˆ60%ï¼‰ã€å¤©ç©ºè“/è‰åœ°ç»¿/æš–é˜³é»„ï¼ˆæŸ”å’Œä¸­ä½é¥±å’Œåº¦å„15%ï¼‰ã€ç‚¹ç¼€ç²‰æ©™çº¢ï¼ˆ10%ï¼‰ã€‚
æ„å›¾éµå¾ªä¸‰åˆ†æ³•ï¼Œç•™ç™½å……è¶³ï¼ˆ25%ï¼‰ï¼Œè§†è§‰ç„¦ç‚¹åç§»ä¸­å¿ƒè¥é€ å™äº‹æ„Ÿï¼Œ
å‰æ™¯ä¸­æ™¯è¿œæ™¯å±‚æ¬¡åˆ†æ˜ï¼Œå…‰å½±è‡ªç„¶æŸ”å’Œå‘ˆç°ä¸€å¤©ä¸­çš„ç‰¹å®šæ—¶åˆ»ã€‚
å­—ä½“ï¼šæ ‡é¢˜ç”¨åœ†æ¶¦æ‰‹å†™ä½“æˆ–ç«¥è¶£å®‹ä½“ï¼ˆ36ptï¼‰ï¼Œæ­£æ–‡ç”¨æ¸©å’Œé»‘ä½“/æ˜æœä½“ï¼ˆ16ptï¼‰ï¼Œ
å¼ºè°ƒæ–‡å­—ç”¨æ‰‹å†™ä¹¦æ³•ä½“ã€‚ç»†èŠ‚å……æ»¡ç”Ÿå‘½åŠ›ï¼ŒåŒ…å«é£˜åŠ¨çš„å‘ä¸ã€é£å¹è‰åŠ¨ã€
å…‰æ–‘æ´’è½ã€æ°´æ±½æ°¤æ°²ï¼Œé€‚åˆå„¿ç«¥æ•™è‚²ã€æ—…æ¸¸æ¨å¹¿ã€ç¯ä¿ä¸»é¢˜åŠæ¸©é¦¨å“ç‰Œï¼Œ
ä¸ºæŠ•å½±å’Œçº¸è´¨å°åˆ·ä¼˜åŒ–ï¼Œå‘ˆç°æ‰‹å·¥è´¨æ„Ÿå’Œæƒ…æ„Ÿå…±é¸£ã€‚""",
        preview_prompt="Studio Ghibli style, watercolor hand-drawn illustration, warm and healing atmosphere, soft sky and clouds, natural scenery with grass and trees"
    ),

    StyleType.DISNEY: StyleTemplate(
        type=StyleType.DISNEY,
        name="è¿ªå£«å°¼Â·é­”æ³•å¥‡å¹»é£",
        name_en="Disney Style",
        description="""é¥±å’Œæ˜å¿«è‰²å½©ï¼Œå¤¸å¼ æµç•…çš„æ›²çº¿é€ å‹ä¸æˆå‰§åŒ–å…‰å½±å¯¹æ¯”ã€‚
è§’è‰²å¤§çœ¼åœ†æ¶¦ï¼Œè¡¨æƒ…ç”ŸåŠ¨å¤¸å¼ ï¼ŒåŠ¨ä½œå……æ»¡å¼¹æ€§å’ŒéŸµå¾‹æ„Ÿï¼ˆSquash & Stretchï¼‰ã€‚è‰²å½©æ¬¢å¿«æ¢¦å¹»ï¼š
çº¯ç™½/æµ…è“å¤©ç©ºåº•ï¼ˆ50%ï¼‰ã€å®çŸ³çº¢/çš‡å®¶è“/é‡‘é»„ï¼ˆé«˜é¥±å’Œä¸»è‰²å„20%ï¼‰ã€
é­”æ³•ç´«/æ˜Ÿå…‰é“¶ç‚¹ç¼€ï¼ˆ10%ï¼‰ã€‚
æ„å›¾å¯¹ç§°ç¨³å®šä¸­å¸¦æˆå‰§å¼ åŠ›ï¼Œä¸­å¿ƒæ”¾å°„å¼å¸ƒå±€ï¼Œæ˜Ÿå…‰/é­”æ³•ç²’å­ç¯ç»•ï¼Œ
æ™¯æ·±æ˜æ˜¾ï¼Œå‰æ™¯å‰ªå½±+ä¸­æ™¯ä¸»ä½“+è¿œæ™¯åŸå ¡å¡”å°–ï¼Œç•™ç™½15%ã€‚
å­—ä½“ï¼šæ ‡é¢˜ç”¨ç»å…¸è¡¬çº¿ç«¥è¯ä½“æˆ–åœ†æ¶¦å¡é€šå­—ä½“ï¼ˆ42ptï¼‰ï¼Œæ­£æ–‡ç”¨å‹å¥½æ— è¡¬çº¿ä½“ï¼ˆ18ptï¼‰ï¼Œ
ç‰¹æ®Šè¯æ±‡ç”¨èŠ±ä½“/æ‰‹å†™ç­¾åä½“ã€‚ç»†èŠ‚å¯Œå«é­”æ³•å…ƒç´ ï¼ŒåŒ…å«æ˜Ÿå…‰é—ªçƒã€
ä¸å¸¦é£˜æ‰¬ã€éŸ³ç¬¦è·³åŠ¨ã€èŠ±ç“£é£èˆï¼Œé€‚åˆå®¶åº­å¨±ä¹ã€å„¿ç«¥äº§å“ã€ä¸»é¢˜ä¹å›­åŠ
èŠ‚æ—¥åº†å…¸ï¼Œä¸ºé«˜æ¸…å¤§å±å’ŒåŠ¨ç”»æ¼”ç¤ºä¼˜åŒ–ï¼Œä¼ é€’å¿«ä¹ä¸æ¢¦æƒ³ã€‚""",
        preview_prompt="Disney animation style, vibrant colors, magical elements, exaggerated expressions, sparkles and fairy dust, castle silhouettes"
    ),

    StyleType.MEMPHIS: StyleTemplate(
        type=StyleType.MEMPHIS,
        name="å­Ÿè²æ–¯Â·ç‹‚æ¬¢å‡ ä½•é£",
        name_en="Memphis Style",
        description="""é«˜é¥±å’Œæ’è‰²æ‹¼è´´ï¼Œéšæœºå‡ ä½•å›¾å½¢ï¼ˆåœ†ç‚¹/æ³¢æµªçº¿/ä¸‰è§’/é”¯é½¿ï¼‰æ— åºæ’åˆ—ã€‚
æ‰å¹³åŒ–è‰²å—æ— æ¸å˜ï¼Œç²—é»‘è½®å»“çº¿å‹¾è¾¹ï¼Œå›¾æ¡ˆå¯†é›†é‡å¤åˆ¶é€ è§†è§‰å†²å‡»ã€‚è‰²å½©ç‹‚é‡å†²çªï¼š
ç™½åº•æˆ–è§å…‰åº•ï¼ˆ40%ï¼‰ã€è§å…‰ç²‰/æŸ æª¬é»„/ç”µå…‰è“/è–„è·ç»¿/ç´«ç½—å…°ï¼ˆ
é«˜é¥±å’Œçº¯è‰²å„10-12%ï¼‰ï¼Œçº¯é»‘å‹¾çº¿ï¼ˆ8%ï¼‰ã€‚
æ„å›¾æ‰“ç ´å¸¸è§„ï¼Œä¸å¯¹ç§°åŠ¨æ€å¹³è¡¡ï¼Œå…ƒç´ éšæœºæ—‹è½¬ã€é”™ä½å åŠ ã€å°ºå¯¸å¯¹æ¯”å¼ºçƒˆï¼Œ
ç½‘æ ¼ä¸è‡ªç”±å½¢çŠ¶æ··æ­ï¼Œç•™ç™½ä»…5-10%åˆ¶é€ é¥±æ»¡å¼ åŠ›ã€‚
å­—ä½“ï¼šæ ‡é¢˜ç”¨ç²—é»‘å‡ ä½•æ— è¡¬çº¿ä½“æˆ–è§£æ„å­—ä½“ï¼ˆ48ptï¼‰ï¼Œæ­£æ–‡ç”¨ç®€æ´Grotesqueå­—ä½“ï¼ˆ20ptï¼‰ï¼Œ
æ•°å­—ç”¨å¤¸å¼ è£…é¥°ä½“ã€‚ç»†èŠ‚å±‚æ¬¡ä¸°å¯Œï¼ŒåŒ…å«åŠè‰²è°ƒç½‘ç‚¹ã€ç»†ç¢å›¾æ¡ˆå¡«å……ã€
è‰²å—æŠ•å½±é”™ä½ã€çº¿æ¡è£…é¥°è¾¹æ¡†ï¼Œé€‚åˆæ—¶å°šå“ç‰Œã€éŸ³ä¹èŠ‚æµ·æŠ¥ã€æ½®æµæ´»åŠ¨åŠ
å¹´è½»ç¤¾ç¾¤è¥é”€ï¼Œä¸ºæ•°å­—å±å¹•å’Œç¤¾äº¤åª’ä½“ä¼˜åŒ–ï¼Œä¼ é€’å›é€†ä¸æ´»åŠ›ã€‚""",
        preview_prompt="Memphis design style, bold geometric shapes, bright neon colors, asymmetric composition, dots and zigzag patterns, 1980s postmodern aesthetic"
    ),

    StyleType.GRAFFITI: StyleTemplate(
        type=StyleType.GRAFFITI,
        name="æ¶‚é¸¦Â·è¡—å¤´çˆ†å‘é£",
        name_en="Graffiti Style",
        description="""ç²—ç³™è´¨æ„Ÿåº•çº¹ï¼ˆç –å¢™/æ··å‡åœŸï¼‰ï¼Œå–·æ¼†æ™•æŸ“ä¸æ»´è½æ•ˆæœï¼Œé‡æ€§å¥”æ”¾ç¬”è§¦ã€‚
å¤§èƒ†å˜å½¢å­—ä½“è®¾è®¡ï¼Œ3Dç«‹ä½“é˜´å½±ï¼Œæè¾¹/é«˜å…‰/åå…‰å¤šå±‚å åŠ ã€‚è‰²å½©å¯¹æŠ—å¼ºçƒˆï¼š
æ·±ç°/ç –çº¢å¢™é¢åº•ï¼ˆ55%ï¼‰ã€è§å…‰æ©™/äº®ç»¿/æ´‹çº¢/å¤©è“ï¼ˆé«˜å¯¹æ¯”å¼ºè°ƒè‰²å„10-12%ï¼‰ï¼Œ
çº¯ç™½é«˜å…‰/çº¯é»‘é˜´å½±ï¼ˆ15%ï¼‰ã€‚
æ„å›¾çˆ†ç‚¸å¼æ‰©å¼ ï¼Œä¸­å¿ƒå‘å¤–è¾å°„èƒ½é‡ï¼Œå…ƒç´ æº¢å‡ºè¾¹ç•Œï¼Œé€è§†å¤¸å¼ å˜å½¢ï¼Œ
ç®­å¤´/æ˜Ÿçˆ†/é€Ÿåº¦çº¿å¼•å¯¼è§†çº¿ï¼Œç•™ç™½å‡ ä¹ä¸º0è¥é€ å‹è¿«æ„Ÿã€‚
å­—ä½“ï¼šæ ‡é¢˜ç”¨æ‰‹ç»˜æ¶‚é¸¦å­—ä½“æˆ–æ³¡æ³¡å­—/é‡é£æ ¼ï¼ˆWildstyleï¼‰ï¼ˆ50pt+ï¼‰ï¼Œ
æ­£æ–‡ç”¨æ‰‹å†™æ ‡ç­¾ä½“æˆ–æ¨¡ç‰ˆå­—ï¼ˆ20ptï¼‰ï¼Œæ ‡ç­¾ï¼ˆTagï¼‰ç”¨å¿«é€Ÿç­¾åä½“ã€‚
ç»†èŠ‚å……æ»¡è¡—å¤´ç¬¦å·ï¼ŒåŒ…å«å–·æ¼†é¢—ç²’ã€æ»´å¢¨ç—•è¿¹ã€æ’•è£‚è¾¹ç¼˜ã€è´´çº¸å…ƒç´ ã€
äºŒç»´ç /å¡é€šè§’è‰²ç‚¹ç¼€ï¼Œé€‚åˆè¡—å¤´å“ç‰Œã€éŸ³ä¹ä¸“è¾‘ã€æé™è¿åŠ¨åŠé’å¹´æ–‡åŒ–æ´»åŠ¨ï¼Œ
ä¸ºæˆ·å¤–å¹¿å‘Šç‰Œå’ŒåŸå¸‚å¤§å±ä¼˜åŒ–ï¼Œä¼ é€’åå›ä¸è‡ªç”±ç²¾ç¥ã€‚""",
        preview_prompt="Street graffiti art, spray paint texture, bold 3D lettering, vibrant neon colors on brick wall, urban style with drips and tags"
    ),
}
```

#### 3.1.2 Style æ•°æ®æ¨¡å‹æ‰©å±•

**ä½ç½®**: `backend/app/models/style.py`

```python
@dataclass
class Style:
    prompt: str                          # é£æ ¼æè¿°æç¤ºè¯
    image: str                           # ç›¸å¯¹è·¯å¾„ï¼ˆstyle/style.jpgï¼‰
    created_at: datetime
    style_type: StyleType | None = None  # ğŸ†• é£æ ¼ç±»å‹ï¼ˆå¯é€‰ï¼Œå‘åå…¼å®¹ï¼‰
    style_name: str | None = None        # ğŸ†• é£æ ¼åç§°ï¼ˆå¯é€‰ï¼‰
```

**YAML å­˜å‚¨æ ¼å¼** (`slides/{slug}/outline.yml`)ï¼š

```yaml
style:
  prompt: "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜..."
  image: "style/style.jpg"
  created_at: "2026-02-03T10:30:00"
  style_type: "ghibli"                    # æ–°å¢å­—æ®µ
  style_name: "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£"          # æ–°å¢å­—æ®µ
```

### 3.2 API è®¾è®¡

#### 3.2.1 æ–°å¢ API ç«¯ç‚¹

**ä½ç½®**: `backend/app/api/routes/style.py`

##### 1. è·å–é¢„è®¾é£æ ¼æ¨¡æ¿åˆ—è¡¨

```python
@router.get("/templates", response_model=StyleTemplatesResponse)
async def get_style_templates() -> StyleTemplatesResponse:
    """
    è·å–æ‰€æœ‰å¯ç”¨çš„é¢„è®¾é£æ ¼æ¨¡æ¿

    Returns:
        {
            "templates": [
                {
                    "type": "ghibli",
                    "name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£",
                    "name_en": "Studio Ghibli Style",
                    "description": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯...",
                    "preview_prompt": "Studio Ghibli style..."
                },
                ...
            ]
        }
    """
    pass
```

##### 2. åŸºäºæ¨¡æ¿ç”Ÿæˆé£æ ¼å€™é€‰

```python
@router.post("/{slug}/style/generate-from-template", response_model=GenerateStyleResponse)
async def generate_style_from_template(
    slug: str,
    request: GenerateStyleFromTemplateRequest,
    service: Annotated[StyleService, Depends(get_style_service)],
) -> GenerateStyleResponse:
    """
    åŸºäºé¢„è®¾æ¨¡æ¿ç”Ÿæˆé£æ ¼å€™é€‰å›¾åƒ

    Request Body:
        {
            "style_type": "ghibli",
            "custom_prompt": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯..."  # å¯é€‰ï¼Œç”¨æˆ·ç¼–è¾‘åçš„æç¤ºè¯
        }

    Returns:
        {
            "candidates": [
                {"id": "candidate-abc123", "url": "..."},
                {"id": "candidate-def456", "url": "..."}
            ],
            "template": {
                "type": "ghibli",
                "name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£",
                ...
            }
        }
    """
    pass
```

##### 3. ä¿å­˜é£æ ¼ï¼ˆæ‰©å±•ç°æœ‰ APIï¼‰

```python
@router.put("/{slug}/style", response_model=SaveStyleResponse)
async def save_style(
    slug: str,
    request: SaveStyleRequest,
    service: Annotated[StyleService, Depends(get_style_service)],
) -> SaveStyleResponse:
    """
    ä¿å­˜é€‰ä¸­çš„é£æ ¼å€™é€‰ä¸ºé¡¹ç›®é£æ ¼

    Request Body:
        {
            "prompt": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯...",
            "candidate_id": "candidate-abc123",
            "style_type": "ghibli",        # ğŸ†• æ–°å¢å­—æ®µ
            "style_name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£"  # ğŸ†• æ–°å¢å­—æ®µ
        }

    Returns:
        {
            "style": {
                "prompt": "...",
                "image": "style/style.jpg",
                "created_at": "...",
                "style_type": "ghibli",
                "style_name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£"
            }
        }
    """
    pass
```

#### 3.2.2 Schema å®šä¹‰

**ä½ç½®**: `backend/app/api/schemas/style.py`

```python
from pydantic import BaseModel
from app.models.style import StyleType

# è¯·æ±‚ Schema
class GenerateStyleFromTemplateRequest(BaseModel):
    style_type: StyleType
    custom_prompt: str | None = None

class SaveStyleRequest(BaseModel):
    prompt: str
    candidate_id: str
    style_type: StyleType | None = None     # ğŸ†•
    style_name: str | None = None           # ğŸ†•

# å“åº” Schema
class StyleTemplateResponse(BaseModel):
    type: str
    name: str
    name_en: str
    description: str
    preview_prompt: str

class StyleTemplatesResponse(BaseModel):
    templates: list[StyleTemplateResponse]

class StyleResponse(BaseModel):
    prompt: str
    image: str
    created_at: str
    style_type: str | None = None           # ğŸ†•
    style_name: str | None = None           # ğŸ†•

class GenerateStyleFromTemplateResponse(BaseModel):
    candidates: list[StyleCandidateResponse]
    template: StyleTemplateResponse
```

### 3.3 æœåŠ¡å±‚è®¾è®¡

#### 3.3.1 StyleService æ‰©å±•

**ä½ç½®**: `backend/app/services/style_service.py`

```python
class StyleService:

    @staticmethod
    def get_style_templates() -> list[StyleTemplate]:
        """è·å–æ‰€æœ‰é¢„è®¾é£æ ¼æ¨¡æ¿"""
        return list(STYLE_TEMPLATES.values())

    @staticmethod
    def get_template_by_type(style_type: StyleType) -> StyleTemplate | None:
        """æ ¹æ®ç±»å‹è·å–é£æ ¼æ¨¡æ¿"""
        return STYLE_TEMPLATES.get(style_type)

    async def generate_candidates_from_template(
        self,
        slug: str,
        style_type: StyleType,
        custom_prompt: str | None = None,
    ) -> tuple[list[StyleCandidate], StyleTemplate]:
        """
        åŸºäºé¢„è®¾æ¨¡æ¿ç”Ÿæˆé£æ ¼å€™é€‰

        Args:
            slug: é¡¹ç›® slug
            style_type: é£æ ¼ç±»å‹
            custom_prompt: è‡ªå®šä¹‰æç¤ºè¯ï¼ˆå¯é€‰ï¼Œä¼˜å…ˆçº§é«˜äºæ¨¡æ¿é»˜è®¤ï¼‰

        Returns:
            (å€™é€‰åˆ—è¡¨, ä½¿ç”¨çš„æ¨¡æ¿)
        """
        template = self.get_template_by_type(style_type)
        if not template:
            raise InvalidRequestError(f"Unknown style type: {style_type}")

        # ä½¿ç”¨è‡ªå®šä¹‰æç¤ºè¯æˆ–æ¨¡æ¿é»˜è®¤æç¤ºè¯
        prompt = custom_prompt or template.description

        # è°ƒç”¨ç°æœ‰ç”Ÿæˆé€»è¾‘
        candidates = await self.generate_candidates(slug, prompt)

        return candidates, template

    async def save_style(
        self,
        slug: str,
        prompt: str,
        candidate_id: str,
        style_type: StyleType | None = None,
        style_name: str | None = None,
    ) -> Style:
        """
        ä¿å­˜é€‰ä¸­çš„é£æ ¼

        Args:
            slug: é¡¹ç›® slug
            prompt: é£æ ¼æè¿°
            candidate_id: å€™é€‰ ID
            style_type: é£æ ¼ç±»å‹ï¼ˆå¯é€‰ï¼‰
            style_name: é£æ ¼åç§°ï¼ˆå¯é€‰ï¼‰
        """
        # ç°æœ‰ä¿å­˜é€»è¾‘...
        style = Style(
            prompt=prompt,
            image="style/style.jpg",
            created_at=datetime.now(),
            style_type=style_type,      # ğŸ†•
            style_name=style_name,      # ğŸ†•
        )
        # ä¿å­˜åˆ°é¡¹ç›®...
        return style
```

### 3.4 å‰ç«¯è®¾è®¡

#### 3.4.1 ç±»å‹å®šä¹‰æ‰©å±•

**ä½ç½®**: `frontend/src/types/style.ts`

```typescript
export enum StyleType {
  GHIBLI = "ghibli",
  DISNEY = "disney",
  MEMPHIS = "memphis",
  GRAFFITI = "graffiti",
  CUSTOM = "custom",
}

export interface StyleTemplate {
  type: StyleType;
  name: string;
  name_en: string;
  description: string;
  preview_prompt: string;
}

export interface Style {
  prompt: string;
  image: string;
  created_at: string;
  style_type?: StyleType;    // ğŸ†• å¯é€‰å­—æ®µ
  style_name?: string;       // ğŸ†• å¯é€‰å­—æ®µ
}
```

#### 3.4.2 API å®¢æˆ·ç«¯æ‰©å±•

**ä½ç½®**: `frontend/src/api/style.ts`

```typescript
export const styleApi = {
  // ç°æœ‰æ–¹æ³•...

  // ğŸ†• è·å–é£æ ¼æ¨¡æ¿åˆ—è¡¨
  async getStyleTemplates(): Promise<StyleTemplate[]> {
    const response = await apiClient.get<{ templates: StyleTemplate[] }>(
      '/api/style/templates'
    );
    return response.templates;
  },

  // ğŸ†• åŸºäºæ¨¡æ¿ç”Ÿæˆé£æ ¼å€™é€‰
  async generateStyleFromTemplate(
    slug: string,
    styleType: StyleType,
    customPrompt?: string
  ): Promise<{ candidates: StyleCandidate[]; template: StyleTemplate }> {
    const response = await apiClient.post(
      `/api/slides/${slug}/style/generate-from-template`,
      {
        style_type: styleType,
        custom_prompt: customPrompt,
      }
    );
    return response;
  },

  // ğŸ†• ä¿å­˜é£æ ¼ï¼ˆæ‰©å±•å‚æ•°ï¼‰
  async saveStyle(
    slug: string,
    prompt: string,
    candidateId: string,
    styleType?: StyleType,
    styleName?: string
  ): Promise<{ style: Style }> {
    const response = await apiClient.put(
      `/api/slides/${slug}/style`,
      {
        prompt,
        candidate_id: candidateId,
        style_type: styleType,
        style_name: styleName,
      }
    );
    return response;
  },
};
```

#### 3.4.3 çŠ¶æ€ç®¡ç†æ‰©å±•

**ä½ç½®**: `frontend/src/stores/styleStore.ts`

```typescript
interface StyleState {
  // ç°æœ‰çŠ¶æ€...

  // ğŸ†• æ–°å¢çŠ¶æ€
  templates: StyleTemplate[];          // å¯ç”¨çš„é£æ ¼æ¨¡æ¿
  selectedTemplate: StyleTemplate | null;  // å½“å‰é€‰ä¸­çš„æ¨¡æ¿
  isLoadingTemplates: boolean;

  // ğŸ†• æ–°å¢æ“ä½œ
  loadTemplates: () => Promise<void>;
  selectTemplate: (template: StyleTemplate) => void;
  updatePromptFromTemplate: (customPrompt?: string) => void;
}

export const useStyleStore = create<StyleState>((set, get) => ({
  // ç°æœ‰å®ç°...

  // ğŸ†• æ–°å¢å®ç°
  templates: [],
  selectedTemplate: null,
  isLoadingTemplates: false,

  loadTemplates: async () => {
    set({ isLoadingTemplates: true });
    try {
      const templates = await styleApi.getStyleTemplates();
      set({ templates });
    } catch (err) {
      console.error('Failed to load style templates:', err);
    } finally {
      set({ isLoadingTemplates: false });
    }
  },

  selectTemplate: (template) => {
    set({
      selectedTemplate: template,
      promptInput: template.description,  // è‡ªåŠ¨å¡«å……æè¿°
    });
  },

  updatePromptFromTemplate: (customPrompt) => {
    const { selectedTemplate } = get();
    if (selectedTemplate) {
      set({
        promptInput: customPrompt || selectedTemplate.description
      });
    }
  },
}));
```

#### 3.4.4 UI ç»„ä»¶è®¾è®¡

##### StyleSetupModal æ”¹é€ 

**ä½ç½®**: `frontend/src/components/Modals/StyleSetupModal.tsx`

**UI å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           è®¾ç½®é¡¹ç›®é£æ ¼                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  é€‰æ‹©é£æ ¼æ¨¡æ¿ï¼š                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¨ å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£              â–¼          â”‚ â”‚  â† ä¸‹æ‹‰é€‰æ‹©æ¡†
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚  é£æ ¼æè¿°ï¼š                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜ä¸ç»†è…»ç¬”è§¦è¥é€       â”‚ â”‚
â”‚  â”‚ æ¸©æš–æ°›å›´ã€‚å¤©ç©ºäº‘æœµé‡‡ç”¨å±‚å æ™•æŸ“...           â”‚ â”‚  â† å¯ç¼–è¾‘æ–‡æœ¬æ¡†
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚  ç”Ÿæˆé£æ ¼å›¾ç‰‡   â”‚                               â”‚  â† ç”ŸæˆæŒ‰é’®
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                    â”‚
â”‚  é€‰æ‹©ä¸€å¼ å›¾ç‰‡ä½œä¸ºé¡¹ç›®é£æ ¼å‚è€ƒï¼š                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚          â”‚  â”‚          â”‚                       â”‚
â”‚  â”‚  å€™é€‰1    â”‚  â”‚  å€™é€‰2    â”‚                       â”‚  â† å€™é€‰å›¾ç‰‡ï¼ˆç”Ÿæˆåæ˜¾ç¤ºï¼‰
â”‚  â”‚          â”‚  â”‚          â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚  [ é€‰æ‹© ]      [ é€‰æ‹© ]                           â”‚
â”‚                                                    â”‚
â”‚              [ å–æ¶ˆ ]  [ ç¡®å®š ]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç»„ä»¶å®ç°**:

```typescript
export function StyleSetupModal() {
  const {
    templates,
    selectedTemplate,
    promptInput,
    candidates,
    isGenerating,
    loadTemplates,
    selectTemplate,
    generateCandidatesFromTemplate,
    saveStyle,
  } = useStyleStore();

  useEffect(() => {
    loadTemplates();
  }, []);

  const handleTemplateChange = (templateType: StyleType) => {
    const template = templates.find(t => t.type === templateType);
    if (template) {
      selectTemplate(template);
    }
  };

  const handleGenerate = async () => {
    if (!selectedTemplate) return;
    await generateCandidatesFromTemplate(
      selectedTemplate.type,
      promptInput
    );
  };

  const handleSave = async (candidateId: string) => {
    if (!selectedTemplate) return;
    await saveStyle(
      promptInput,
      candidateId,
      selectedTemplate.type,
      selectedTemplate.name
    );
  };

  return (
    <Modal title="è®¾ç½®é¡¹ç›®é£æ ¼">
      {/* é£æ ¼æ¨¡æ¿é€‰æ‹©å™¨ */}
      <div className="mb-4">
        <label className="block mb-2 text-sm font-medium">
          é€‰æ‹©é£æ ¼æ¨¡æ¿
        </label>
        <Select
          value={selectedTemplate?.type}
          onChange={handleTemplateChange}
        >
          {templates.map(template => (
            <option key={template.type} value={template.type}>
              ğŸ¨ {template.name}
            </option>
          ))}
        </Select>
      </div>

      {/* é£æ ¼æè¿°ç¼–è¾‘å™¨ */}
      <div className="mb-4">
        <label className="block mb-2 text-sm font-medium">
          é£æ ¼æè¿°
        </label>
        <Textarea
          value={promptInput}
          onChange={(e) => updatePromptInput(e.target.value)}
          rows={8}
          placeholder="è¯·é€‰æ‹©é£æ ¼æ¨¡æ¿æˆ–è¾“å…¥è‡ªå®šä¹‰æè¿°..."
        />
      </div>

      {/* ç”ŸæˆæŒ‰é’® */}
      <Button
        onClick={handleGenerate}
        disabled={!promptInput || isGenerating}
      >
        {isGenerating ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆé£æ ¼å›¾ç‰‡'}
      </Button>

      {/* å€™é€‰å›¾ç‰‡å±•ç¤º */}
      {candidates.length > 0 && (
        <div className="mt-6">
          <p className="mb-3 text-sm font-medium">
            é€‰æ‹©ä¸€å¼ å›¾ç‰‡ä½œä¸ºé¡¹ç›®é£æ ¼å‚è€ƒ
          </p>
          <div className="grid grid-cols-2 gap-4">
            {candidates.map(candidate => (
              <div key={candidate.id} className="border rounded p-2">
                <img
                  src={candidate.url}
                  alt="Style candidate"
                  className="w-full h-auto rounded mb-2"
                />
                <Button
                  onClick={() => handleSave(candidate.id)}
                  variant="primary"
                  size="sm"
                >
                  é€‰æ‹©
                </Button>
              </div>
            ))}
          </div>
        </div>
      )}
    </Modal>
  );
}
```

##### HomePage æ–°å»ºé¡¹ç›®æµç¨‹æ”¹é€ 

**ä½ç½®**: `frontend/src/components/HomePage/HomePage.tsx`

**æ–°æµç¨‹**:

```
1. ç”¨æˆ·è¾“å…¥é¡¹ç›®åç§°
2. ç‚¹å‡»"åˆ›å»ºé¡¹ç›®"
3. ç”Ÿæˆ slug
4. è·³è½¬åˆ° ProjectEditor
5. è‡ªåŠ¨æ‰“å¼€ StyleSetupModal
   - é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªæ¨¡æ¿ï¼ˆå‰åœåŠ›é£æ ¼ï¼‰
   - è‡ªåŠ¨å¡«å……é£æ ¼æè¿°
6. ç”¨æˆ·å¯ä»¥ï¼š
   - åˆ‡æ¢é£æ ¼æ¨¡æ¿
   - ç¼–è¾‘é£æ ¼æè¿°
   - ç”Ÿæˆé£æ ¼å€™é€‰å›¾ç‰‡
   - é€‰æ‹©ä¸€å¼ ä½œä¸ºé¡¹ç›®é£æ ¼
```

### 3.5 å›¾åƒç”Ÿæˆæµç¨‹æ”¹é€ 

#### 3.5.1 Slide å›¾åƒç”Ÿæˆæºå¸¦é£æ ¼ä¿¡æ¯

**ä½ç½®**: `backend/app/services/image_service.py`

```python
class ImageService:

    async def generate_slide_image(
        self,
        slug: str,
        sid: str,
        regenerate: bool = False,
    ) -> SlideImage:
        """
        ç”Ÿæˆå¹»ç¯ç‰‡å›¾åƒ

        æµç¨‹ï¼š
        1. è·å–é¡¹ç›®å’Œå¹»ç¯ç‰‡ä¿¡æ¯
        2. è·å–é¡¹ç›®é£æ ¼ï¼ˆStyleï¼‰
        3. æ„å»ºå®Œæ•´çš„å›¾åƒç”Ÿæˆæç¤ºè¯
        4. è°ƒç”¨å›¾åƒå¼•æ“ç”Ÿæˆ
        5. ä¿å­˜å›¾åƒå¹¶æ›´æ–°å…ƒæ•°æ®
        """
        project = await self.slides_repository.get_project(slug)
        slide = project.get_slide(sid)

        # ğŸ†• æ„å»ºåŒ…å«é£æ ¼çš„å®Œæ•´æç¤ºè¯
        full_prompt = self._build_slide_prompt(
            slide_content=slide.content,
            style=project.style,
        )

        # è°ƒç”¨å›¾åƒå¼•æ“
        engine = self._get_engine(project)
        image_data = await engine.generate_slide_image(
            prompt=full_prompt,
            style_image_path=self._get_style_image_path(slug, project.style),
        )

        # ä¿å­˜å›¾åƒ
        slide_image = await self.image_repository.save_slide_image(
            slug, sid, image_data
        )

        # æ›´æ–°å¹»ç¯ç‰‡å…ƒæ•°æ®
        slide.images.append(slide_image)
        project.updated_at = datetime.now()
        await self.slides_repository.save_project(project)

        return slide_image

    def _build_slide_prompt(
        self,
        slide_content: str,
        style: Style | None,
    ) -> str:
        """
        æ„å»ºå®Œæ•´çš„å›¾åƒç”Ÿæˆæç¤ºè¯

        æ ¼å¼ï¼š
        [é£æ ¼æè¿°]

        å¹»ç¯ç‰‡å†…å®¹ï¼š
        [å¹»ç¯ç‰‡å†…å®¹]
        """
        if not style:
            return slide_content

        return f"""{style.prompt}

å¹»ç¯ç‰‡å†…å®¹ï¼š
{slide_content}"""

    def _get_style_image_path(
        self,
        slug: str,
        style: Style | None,
    ) -> str | None:
        """è·å–é£æ ¼å‚è€ƒå›¾ç‰‡çš„ç»å¯¹è·¯å¾„"""
        if not style or not style.image:
            return None

        base_path = self.config.slides_base_path
        return f"{base_path}/{slug}/{style.image}"
```

#### 3.5.2 å›¾åƒå¼•æ“æ¥å£æ‰©å±•

**ä½ç½®**: `backend/app/services/image_generation_service.py`

```python
from abc import ABC, abstractmethod

class ImageGenerationService(ABC):

    @abstractmethod
    async def generate_slide_image(
        self,
        prompt: str,
        style_image_path: str | None = None,  # ğŸ†• é£æ ¼å‚è€ƒå›¾ç‰‡è·¯å¾„
    ) -> bytes:
        """
        ç”Ÿæˆå¹»ç¯ç‰‡å›¾åƒ

        Args:
            prompt: å®Œæ•´æç¤ºè¯ï¼ˆåŒ…å«é£æ ¼æè¿°+å¹»ç¯ç‰‡å†…å®¹ï¼‰
            style_image_path: é£æ ¼å‚è€ƒå›¾ç‰‡è·¯å¾„ï¼ˆå¯é€‰ï¼Œç”¨äºå›¾åƒå¼•å¯¼ï¼‰

        Returns:
            å›¾åƒäºŒè¿›åˆ¶æ•°æ®ï¼ˆJPEG æ ¼å¼ï¼‰
        """
        pass
```

**Gemini å®ç°** (`backend/app/services/gemini_service.py`):

```python
class GeminiImageService(ImageGenerationService):

    async def generate_slide_image(
        self,
        prompt: str,
        style_image_path: str | None = None,
    ) -> bytes:
        """
        ä½¿ç”¨ Gemini Imagen 3 ç”Ÿæˆå›¾åƒ

        æ”¯æŒé£æ ¼å‚è€ƒå›¾ç‰‡ä½œä¸ºå¼•å¯¼
        """
        # å‡†å¤‡è¯·æ±‚
        request_body = {
            "prompt": prompt,
            "number_of_images": 1,
            "aspect_ratio": "16:9",
        }

        # ğŸ†• å¦‚æœæä¾›äº†é£æ ¼å‚è€ƒå›¾ç‰‡ï¼Œæ·»åŠ åˆ°è¯·æ±‚ä¸­
        if style_image_path and os.path.exists(style_image_path):
            with open(style_image_path, "rb") as f:
                style_image_base64 = base64.b64encode(f.read()).decode()
            request_body["reference_images"] = [
                {
                    "image": {"bytesBase64Encoded": style_image_base64},
                    "reference_type": "STYLE",  # æŒ‡å®šä¸ºé£æ ¼å‚è€ƒ
                }
            ]

        # è°ƒç”¨ Gemini API
        response = await self._call_api(request_body)
        return response["images"][0]["bytesBase64Encoded"]
```

**VolcEngine å®ç°** (`backend/app/services/volcengine_service.py`):

```python
class VolcEngineImageService(ImageGenerationService):

    async def generate_slide_image(
        self,
        prompt: str,
        style_image_path: str | None = None,
    ) -> bytes:
        """
        ä½¿ç”¨ VolcEngine å›¾åƒç”Ÿæˆ

        æ³¨æ„ï¼šVolcEngine å¯èƒ½ä¸æ”¯æŒé£æ ¼å›¾ç‰‡å¼•å¯¼ï¼Œ
        é£æ ¼ä¿¡æ¯å·²åŒ…å«åœ¨ prompt ä¸­
        """
        request_body = {
            "req_key": self._generate_req_key(),
            "prompt": prompt,
            "width": 1024,
            "height": 1024,
            "scale": 3.5,
            "seed": -1,
            "logo_info": {"add_logo": False},
        }

        # VolcEngine ç›®å‰ä¸æ”¯æŒé£æ ¼å›¾ç‰‡å¼•å¯¼
        # æ‰€æœ‰é£æ ¼ä¿¡æ¯é€šè¿‡ prompt ä¼ é€’

        response = await self._call_api(request_body)
        return base64.b64decode(response["data"]["image_urls"][0])
```

---

## 4. å®ç°è®¡åˆ’

### 4.1 å¼€å‘é˜¶æ®µ

#### é˜¶æ®µ 1ï¼šåç«¯åŸºç¡€è®¾æ–½ï¼ˆ2-3 å°æ—¶ï¼‰

- [ ] å®šä¹‰é£æ ¼æ¨¡æ¿æ•°æ®ç»“æ„ (`models/style.py`)
- [ ] æ‰©å±• Style æ•°æ®æ¨¡å‹ï¼ˆæ·»åŠ  `style_type` å’Œ `style_name` å­—æ®µï¼‰
- [ ] æ·»åŠ æ–° API ç«¯ç‚¹ï¼ˆ`/api/style/templates`, `/api/slides/{slug}/style/generate-from-template`ï¼‰
- [ ] æ‰©å±• StyleService æœåŠ¡å±‚æ–¹æ³•
- [ ] æ›´æ–° Schema å®šä¹‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### é˜¶æ®µ 2ï¼šå‰ç«¯ UI ç»„ä»¶ï¼ˆ2-3 å°æ—¶ï¼‰

- [ ] æ‰©å±• TypeScript ç±»å‹å®šä¹‰
- [ ] æ‰©å±• API å®¢æˆ·ç«¯æ–¹æ³•
- [ ] æ‰©å±•çŠ¶æ€ç®¡ç†ï¼ˆ`styleStore`ï¼‰
- [ ] æ”¹é€  StyleSetupModal ç»„ä»¶
  - [ ] æ·»åŠ é£æ ¼æ¨¡æ¿ä¸‹æ‹‰é€‰æ‹©å™¨
  - [ ] æ·»åŠ é£æ ¼æè¿°ç¼–è¾‘æ¡†
  - [ ] å®ç°æ¨¡æ¿åˆ‡æ¢é€»è¾‘
- [ ] æ›´æ–° HomePage æ–°å»ºé¡¹ç›®æµç¨‹
- [ ] ç¼–å†™ç»„ä»¶æµ‹è¯•

#### é˜¶æ®µ 3ï¼šå›¾åƒç”Ÿæˆé›†æˆï¼ˆ1-2 å°æ—¶ï¼‰

- [ ] æ”¹é€  ImageService çš„ `generate_slide_image` æ–¹æ³•
- [ ] æ‰©å±•å›¾åƒå¼•æ“æ¥å£ï¼ˆæ”¯æŒé£æ ¼å‚è€ƒå›¾ç‰‡ï¼‰
- [ ] æ›´æ–° Gemini é›†æˆï¼ˆæ·»åŠ é£æ ¼å›¾ç‰‡å¼•å¯¼ï¼‰
- [ ] æ›´æ–° VolcEngine é›†æˆï¼ˆç¡®è®¤æ˜¯å¦æ”¯æŒé£æ ¼å›¾ç‰‡ï¼‰
- [ ] æµ‹è¯•ç«¯åˆ°ç«¯å›¾åƒç”Ÿæˆæµç¨‹

#### é˜¶æ®µ 4ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ1-2 å°æ—¶ï¼‰

- [ ] é›†æˆæµ‹è¯•ï¼ˆå®Œæ•´ç”¨æˆ·æµç¨‹ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆé£æ ¼åˆ‡æ¢å“åº”æ—¶é—´ï¼‰
- [ ] UI/UX ä¼˜åŒ–ï¼ˆåŠ è½½çŠ¶æ€ã€é”™è¯¯æç¤ºï¼‰
- [ ] å‘åå…¼å®¹æ€§æµ‹è¯•ï¼ˆç°æœ‰é¡¹ç›®æ— é£æ ¼ç±»å‹å­—æ®µï¼‰
- [ ] æ–‡æ¡£æ›´æ–°

### 4.2 æµ‹è¯•ç”¨ä¾‹

#### å•å…ƒæµ‹è¯•

| æµ‹è¯•ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|---------|------|---------|
| test_get_style_templates | è·å–é¢„è®¾é£æ ¼æ¨¡æ¿åˆ—è¡¨ | è¿”å›4ä¸ªæ¨¡æ¿ |
| test_get_template_by_type | æ ¹æ®ç±»å‹è·å–æ¨¡æ¿ | è¿”å›æ­£ç¡®çš„æ¨¡æ¿å¯¹è±¡ |
| test_generate_from_template | åŸºäºæ¨¡æ¿ç”Ÿæˆå€™é€‰ | ç”Ÿæˆ2å¼ å€™é€‰å›¾ç‰‡ |
| test_save_style_with_type | ä¿å­˜é£æ ¼å¹¶åŒ…å«ç±»å‹ä¿¡æ¯ | Style å¯¹è±¡åŒ…å« style_type å’Œ style_name |
| test_build_slide_prompt | æ„å»ºåŒ…å«é£æ ¼çš„æç¤ºè¯ | æç¤ºè¯åŒ…å«é£æ ¼æè¿°+å¹»ç¯ç‰‡å†…å®¹ |

#### é›†æˆæµ‹è¯•

| æµ‹è¯•ç”¨ä¾‹ | æè¿° | æ­¥éª¤ | é¢„æœŸç»“æœ |
|---------|------|------|---------|
| test_new_project_with_template | æ–°å»ºé¡¹ç›®å¹¶é€‰æ‹©é£æ ¼æ¨¡æ¿ | 1. åˆ›å»ºé¡¹ç›®<br>2. é€‰æ‹©å‰åœåŠ›æ¨¡æ¿<br>3. ç”Ÿæˆå€™é€‰<br>4. ä¿å­˜é£æ ¼ | outline.yml åŒ…å«å®Œæ•´é£æ ¼ä¿¡æ¯ |
| test_edit_template_prompt | ç¼–è¾‘æ¨¡æ¿æç¤ºè¯ | 1. é€‰æ‹©æ¨¡æ¿<br>2. ç¼–è¾‘æè¿°<br>3. ç”Ÿæˆå€™é€‰ | ä½¿ç”¨ç¼–è¾‘åçš„æè¿°ç”Ÿæˆ |
| test_slide_generation_with_style | ç”Ÿæˆ Slide å›¾åƒæºå¸¦é£æ ¼ | 1. è®¾ç½®é¡¹ç›®é£æ ¼<br>2. åˆ›å»ºå¹»ç¯ç‰‡<br>3. ç”Ÿæˆå›¾åƒ | å›¾åƒç¬¦åˆé£æ ¼ç‰¹å¾ |
| test_backward_compatibility | å‘åå…¼å®¹æ€§ | åŠ è½½æ—  style_type å­—æ®µçš„æ—§é¡¹ç›® | æ­£å¸¸åŠ è½½ï¼Œä¸æŠ¥é”™ |

### 4.3 æ•°æ®è¿ç§»

#### ç°æœ‰é¡¹ç›®æ•°æ®

- **å…¼å®¹æ€§ç­–ç•¥**ï¼šç°æœ‰é¡¹ç›®çš„ `outline.yml` ä¸­æ²¡æœ‰ `style_type` å’Œ `style_name` å­—æ®µ
- **å¤„ç†æ–¹å¼**ï¼š
  - åç«¯è¯»å–æ—¶å°†è¿™ä¸¤ä¸ªå­—æ®µè®¾ä¸º `None`ï¼ˆå¯é€‰å­—æ®µï¼‰
  - å‰ç«¯æ˜¾ç¤ºæ—¶ï¼Œå¦‚æœæ²¡æœ‰ `style_type`ï¼Œåˆ™æ˜¾ç¤ºä¸º"è‡ªå®šä¹‰é£æ ¼"
  - ç”¨æˆ·å¯ä»¥åœ¨é£æ ¼è®¾ç½®ä¸­é‡æ–°é€‰æ‹©æ¨¡æ¿æˆ–ç»§ç»­ä½¿ç”¨è‡ªå®šä¹‰é£æ ¼

#### è¿ç§»è„šæœ¬ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä¸ºç°æœ‰é¡¹ç›®è‡ªåŠ¨è¯†åˆ«é£æ ¼ç±»å‹ï¼š

```python
# scripts/migrate_style_types.py

import yaml
from pathlib import Path
from app.models.style import STYLE_TEMPLATES, StyleType

def detect_style_type(prompt: str) -> tuple[StyleType | None, str | None]:
    """åŸºäºæç¤ºè¯å†…å®¹æ£€æµ‹æœ€åŒ¹é…çš„é£æ ¼ç±»å‹"""
    for style_type, template in STYLE_TEMPLATES.items():
        # ç®€å•ç›¸ä¼¼åº¦åŒ¹é…ï¼ˆå¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„ç®—æ³•ï¼‰
        if template.description[:100] in prompt:
            return style_type, template.name
    return None, None

def migrate_project(project_path: Path):
    """è¿ç§»å•ä¸ªé¡¹ç›®"""
    outline_path = project_path / "outline.yml"
    if not outline_path.exists():
        return

    with open(outline_path, "r", encoding="utf-8") as f:
        data = yaml.safe_load(f)

    if "style" in data and "style_type" not in data["style"]:
        prompt = data["style"]["prompt"]
        style_type, style_name = detect_style_type(prompt)

        if style_type:
            data["style"]["style_type"] = style_type.value
            data["style"]["style_name"] = style_name

            with open(outline_path, "w", encoding="utf-8") as f:
                yaml.dump(data, f, allow_unicode=True)

            print(f"âœ“ Migrated {project_path.name}: {style_name}")
        else:
            print(f"âŠ˜ Skipped {project_path.name}: custom style")

def main():
    slides_dir = Path("./slides")
    for project_dir in slides_dir.iterdir():
        if project_dir.is_dir():
            migrate_project(project_dir)

if __name__ == "__main__":
    main()
```

---

## 5. é£é™©ä¸æŒ‘æˆ˜

### 5.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|---------|
| å›¾åƒå¼•æ“ä¸æ”¯æŒé£æ ¼å›¾ç‰‡å¼•å¯¼ | é£æ ¼ä¸€è‡´æ€§ä¸‹é™ | å°†é£æ ¼ä¿¡æ¯å®Œæ•´ç¼–ç åœ¨ prompt ä¸­ |
| é£æ ¼æè¿°è¿‡é•¿å¯¼è‡´ token è¶…é™ | ç”Ÿæˆå¤±è´¥ | è®¾è®¡ç²¾ç®€ç‰ˆæç¤ºè¯ï¼Œåˆ†ç¦»æ ¸å¿ƒé£æ ¼è¦ç´  |
| å‘åå…¼å®¹æ€§é—®é¢˜ | æ—§é¡¹ç›®æ— æ³•åŠ è½½ | æ‰€æœ‰æ–°å­—æ®µè®¾ä¸ºå¯é€‰ï¼Œè¯»å–æ—¶æä¾›é»˜è®¤å€¼ |

### 5.2 äº§å“é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|---------|
| ç”¨æˆ·ä¸å–œæ¬¢é¢„è®¾æ¨¡æ¿ | ä½¿ç”¨ç‡ä½ | ä¿ç•™è‡ªå®šä¹‰é£æ ¼é€‰é¡¹ï¼Œæ¨¡æ¿å¯ç¼–è¾‘ |
| æ¨¡æ¿æè¿°ä¸å¤Ÿå‡†ç¡® | ç”Ÿæˆæ•ˆæœå·® | åŸºäºç”¨æˆ·åé¦ˆæŒç»­ä¼˜åŒ–æ¨¡æ¿æè¿° |
| æ¨¡æ¿æ•°é‡ä¸è¶³ | é™åˆ¶åˆ›é€ åŠ› | è®¾è®¡å¯æ‰©å±•æ¶æ„ï¼Œåç»­å¯æ·»åŠ æ›´å¤šæ¨¡æ¿ |

### 5.3 æ€§èƒ½é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|---------|
| é£æ ¼æè¿°è¿‡é•¿å¢åŠ ç”Ÿæˆæ—¶é—´ | ç”¨æˆ·ä½“éªŒä¸‹é™ | ä¼˜åŒ–æç¤ºè¯ç»“æ„ï¼Œç§»é™¤å†—ä½™ä¿¡æ¯ |
| é¢‘ç¹åˆ‡æ¢æ¨¡æ¿å¯¼è‡´é‡å¤ç”Ÿæˆ | æˆæœ¬å¢åŠ  | æ·»åŠ ç”Ÿæˆç¡®è®¤å¯¹è¯æ¡†ï¼Œé˜²æ­¢è¯¯æ“ä½œ |

---

## 6. åç»­ä¼˜åŒ–æ–¹å‘

### 6.1 çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2 å‘¨ï¼‰

- [ ] æ·»åŠ é£æ ¼é¢„è§ˆå›¾ï¼ˆä¸ç”Ÿæˆï¼Œä½¿ç”¨é¢„å…ˆè®¾è®¡çš„ç¤ºä¾‹å›¾ï¼‰
- [ ] æ”¯æŒé£æ ¼å¼ºåº¦è°ƒèŠ‚ï¼ˆæ»‘å—æ§åˆ¶é£æ ¼æè¿°çš„æƒé‡ï¼‰
- [ ] ä¼˜åŒ–é£æ ¼æè¿°çš„å¯è¯»æ€§ï¼ˆåˆ†æ®µã€æ ¼å¼åŒ–ï¼‰
- [ ] æ·»åŠ é£æ ¼åˆ‡æ¢ç¡®è®¤å¯¹è¯æ¡†ï¼ˆé¿å…æ„å¤–è¦†ç›–ï¼‰

### 6.2 ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2 æœˆï¼‰

- [ ] å¢åŠ æ›´å¤šé¢„è®¾æ¨¡æ¿ï¼ˆå¦‚ï¼šæ‰å¹³åŒ–è®¾è®¡ã€æ°´å¢¨ç”»ã€ç§‘æŠ€æ„Ÿç­‰ï¼‰
- [ ] æ”¯æŒé£æ ¼æ··åˆï¼ˆå¤šä¸ªæ¨¡æ¿ç»„åˆï¼‰
- [ ] æ·»åŠ ç¤¾åŒºé£æ ¼åº“ï¼ˆç”¨æˆ·åˆ†äº«è‡ªå®šä¹‰é£æ ¼ï¼‰
- [ ] é£æ ¼æ•ˆæœå¯¹æ¯”å·¥å…·ï¼ˆA/B æµ‹è¯•ï¼‰

### 6.3 é•¿æœŸä¼˜åŒ–ï¼ˆ3-6 æœˆï¼‰

- [ ] AI è‡ªåŠ¨æ¨èé£æ ¼ï¼ˆåŸºäºå¹»ç¯ç‰‡å†…å®¹ï¼‰
- [ ] é£æ ¼å­¦ä¹ åŠŸèƒ½ï¼ˆåŸºäºç”¨æˆ·é€‰æ‹©çš„å›¾ç‰‡è®­ç»ƒé£æ ¼æ¨¡å‹ï¼‰
- [ ] å¤šè¯­è¨€é£æ ¼æè¿°æ”¯æŒ
- [ ] é£æ ¼ç‰ˆæœ¬ç®¡ç†ï¼ˆè·Ÿè¸ªé£æ ¼å˜æ›´å†å²ï¼‰

---

## 7. æ–‡æ¡£ä¸èµ„æº

### 7.1 ç›¸å…³æ–‡æ¡£

- [é£æ ¼æ¨¡æ¿è¯¦ç»†æè¿°æ–‡æ¡£](./style-templates.md)ï¼ˆå¾…åˆ›å»ºï¼‰
- [å›¾åƒç”Ÿæˆ API é›†æˆæŒ‡å—](./image-generation-integration.md)ï¼ˆç°æœ‰ï¼‰
- [é¡¹ç›®æ•°æ®ç»“æ„è§„èŒƒ](./project-data-structure.md)ï¼ˆç°æœ‰ï¼‰

### 7.2 å‚è€ƒèµ„æ–™

- **å‰åœåŠ›é£æ ¼**ï¼š[Studio Ghibli Art Style Guide](https://ghibli.fandom.com/)
- **è¿ªå£«å°¼é£æ ¼**ï¼š[Disney Animation Principles](https://en.wikipedia.org/wiki/Twelve_basic_principles_of_animation)
- **å­Ÿè²æ–¯é£æ ¼**ï¼š[Memphis Design Movement](https://en.wikipedia.org/wiki/Memphis_Group)
- **æ¶‚é¸¦è‰ºæœ¯**ï¼š[Street Art and Graffiti Styles](https://en.wikipedia.org/wiki/Graffiti)

### 7.3 å¼€å‘å·¥å…·

- **åç«¯æµ‹è¯•**ï¼špytest, pytest-asyncio
- **å‰ç«¯æµ‹è¯•**ï¼šVitest, React Testing Library
- **API æ–‡æ¡£**ï¼šSwagger/OpenAPI
- **ä»£ç è´¨é‡**ï¼šESLint, Black, mypy

---

## 8. é™„å½•

### 8.1 API å®Œæ•´ç¤ºä¾‹

#### è¯·æ±‚ç¤ºä¾‹ 1ï¼šè·å–é£æ ¼æ¨¡æ¿

```bash
GET /api/style/templates
```

**å“åº”**:

```json
{
  "templates": [
    {
      "type": "ghibli",
      "name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£",
      "name_en": "Studio Ghibli Style",
      "description": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜ä¸ç»†è…»ç¬”è§¦...",
      "preview_prompt": "Studio Ghibli style, watercolor..."
    },
    {
      "type": "disney",
      "name": "è¿ªå£«å°¼Â·é­”æ³•å¥‡å¹»é£",
      "name_en": "Disney Style",
      "description": "é¥±å’Œæ˜å¿«è‰²å½©ï¼Œå¤¸å¼ æµç•…çš„æ›²çº¿é€ å‹...",
      "preview_prompt": "Disney animation style, vibrant colors..."
    },
    {
      "type": "memphis",
      "name": "å­Ÿè²æ–¯Â·ç‹‚æ¬¢å‡ ä½•é£",
      "name_en": "Memphis Style",
      "description": "é«˜é¥±å’Œæ’è‰²æ‹¼è´´ï¼Œéšæœºå‡ ä½•å›¾å½¢...",
      "preview_prompt": "Memphis design style, bold geometric shapes..."
    },
    {
      "type": "graffiti",
      "name": "æ¶‚é¸¦Â·è¡—å¤´çˆ†å‘é£",
      "name_en": "Graffiti Style",
      "description": "ç²—ç³™è´¨æ„Ÿåº•çº¹ï¼Œå–·æ¼†æ™•æŸ“ä¸æ»´è½æ•ˆæœ...",
      "preview_prompt": "Street graffiti art, spray paint texture..."
    }
  ]
}
```

#### è¯·æ±‚ç¤ºä¾‹ 2ï¼šåŸºäºæ¨¡æ¿ç”Ÿæˆé£æ ¼å€™é€‰

```bash
POST /api/slides/my-project-abc123/style/generate-from-template
Content-Type: application/json

{
  "style_type": "ghibli",
  "custom_prompt": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜..."  // å¯é€‰
}
```

**å“åº”**:

```json
{
  "candidates": [
    {
      "id": "candidate-a1b2c3d4",
      "url": "/api/slides/my-project-abc123/style/candidates/candidate-a1b2c3d4.jpg"
    },
    {
      "id": "candidate-e5f6g7h8",
      "url": "/api/slides/my-project-abc123/style/candidates/candidate-e5f6g7h8.jpg"
    }
  ],
  "template": {
    "type": "ghibli",
    "name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£",
    "name_en": "Studio Ghibli Style",
    "description": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜...",
    "preview_prompt": "Studio Ghibli style, watercolor..."
  }
}
```

#### è¯·æ±‚ç¤ºä¾‹ 3ï¼šä¿å­˜é£æ ¼

```bash
PUT /api/slides/my-project-abc123/style
Content-Type: application/json

{
  "prompt": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜...",
  "candidate_id": "candidate-a1b2c3d4",
  "style_type": "ghibli",
  "style_name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£"
}
```

**å“åº”**:

```json
{
  "style": {
    "prompt": "æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜...",
    "image": "style/style.jpg",
    "created_at": "2026-02-03T10:30:00.123456",
    "style_type": "ghibli",
    "style_name": "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£"
  }
}
```

### 8.2 æ•°æ®ç»“æ„å®Œæ•´ç¤ºä¾‹

#### outline.yml å®Œæ•´æ ¼å¼

```yaml
# é¡¹ç›®åŸºæœ¬ä¿¡æ¯
title: "æˆ‘çš„æ¼”ç¤ºé¡¹ç›®"
created_at: "2026-02-03T10:30:00.123456"
updated_at: "2026-02-03T11:45:30.789012"

# ğŸ†• é£æ ¼ä¿¡æ¯ï¼ˆåŒ…å«æ–°å­—æ®µï¼‰
style:
  prompt: |
    æ‰‹ç»˜æ°´å½©è´¨æ„ŸèƒŒæ™¯ï¼ŒæŸ”å’Œæ¸å˜ä¸ç»†è…»ç¬”è§¦è¥é€ æ¸©æš–æ°›å›´ã€‚
    å¤©ç©ºäº‘æœµé‡‡ç”¨å±‚å æ™•æŸ“ï¼Œè‡ªç„¶æ™¯ç‰©ï¼ˆè‰åœ°/æ ‘æœ¨/æ°´é¢ï¼‰ç²¾ç»†æç»˜ã€‚
    è‰²å½©æ¸©æ¶¦æ²»æ„ˆï¼šå¥¶æ²¹ç™½åº•ï¼ˆ60%ï¼‰ã€å¤©ç©ºè“/è‰åœ°ç»¿/æš–é˜³é»„...
  image: "style/style.jpg"
  created_at: "2026-02-03T10:35:00.123456"
  style_type: "ghibli"              # ğŸ†• é£æ ¼ç±»å‹
  style_name: "å‰åœåŠ›Â·æ²»æ„ˆè‡ªç„¶é£"   # ğŸ†• é£æ ¼åç§°

# å¹»ç¯ç‰‡åˆ—è¡¨
slides:
  - sid: "slide-a1b2c3d4"
    content: |
      æ ‡é¢˜ï¼šæ¬¢è¿æ¥åˆ°æˆ‘çš„æ¼”ç¤º

      è¦ç‚¹ï¼š
      - ç¬¬ä¸€ç‚¹å†…å®¹
      - ç¬¬äºŒç‚¹å†…å®¹
      - ç¬¬ä¸‰ç‚¹å†…å®¹
    created_at: "2026-02-03T10:40:00.123456"
    updated_at: "2026-02-03T10:45:00.123456"
    images:
      - hash: "abc123def456"
        path: "images/slide-a1b2c3d4/abc123def456.jpg"
        created_at: "2026-02-03T10:42:00.123456"
      - hash: "ghi789jkl012"
        path: "images/slide-a1b2c3d4/ghi789jkl012.jpg"
        created_at: "2026-02-03T10:44:00.123456"

# æˆæœ¬ä¿¡æ¯
cost:
  estimated_cost: 0.24
  slide_generations: 10
  style_generations: 2
  total_images: 12

# å›¾åƒå¼•æ“é…ç½®
image_engine: "volcengine"  # æˆ– "gemini"
```

---

## 9. å®¡æ‰¹ä¸ç¡®è®¤

### 9.1 è®¾è®¡å®¡æ‰¹

- [ ] **äº§å“ç»ç†å®¡æ‰¹**ï¼šç¡®è®¤éœ€æ±‚ä¸åŠŸèƒ½è®¾è®¡
- [ ] **æŠ€æœ¯è´Ÿè´£äººå®¡æ‰¹**ï¼šç¡®è®¤æŠ€æœ¯æ–¹æ¡ˆä¸æ¶æ„è®¾è®¡
- [ ] **UI/UX è®¾è®¡å¸ˆå®¡æ‰¹**ï¼šç¡®è®¤ç•Œé¢è®¾è®¡ä¸äº¤äº’æµç¨‹

### 9.2 å¼€å‘å‡†å¤‡

- [ ] æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡é€šè¿‡
- [ ] å¼€å‘èµ„æºåˆ†é…å®Œæˆ
- [ ] ä¾èµ–åº“å’Œå·¥å…·å‡†å¤‡å°±ç»ª
- [ ] å¼€å‘ç¯å¢ƒé…ç½®å®Œæˆ

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2026-02-03
**ä½œè€…**: Claude Code
**å®¡æ‰¹çŠ¶æ€**: å¾…å®¡æ‰¹
